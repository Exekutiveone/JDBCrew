<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DB Web GUI</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <h1>DB Web GUI</h1>
    <span class="pill">API Base URL:</span>
    <input id="baseUrlInput" type="text" placeholder="z.B. http://localhost:8080" style="max-width:360px"/>
    <button id="saveBase" class="accent" style="width:auto">Speichern</button>
    <span id="activeBase" class="muted">â€”</span>
  </header>

  <div class="container">
    <!-- GLOBAL SETTINGS -->
    <section class="card">
      <h2>1) Verbindung wÃ¤hlen</h2>
      <label for="dbSelect">Datenbank</label>
      <select id="dbSelect">
        <option value="dbLocal">dbLocal - Lokal (SQLite)</option>
        <option value="db1">DB1 â€“ Raspberry Pi</option>
        <option value="db2">DB2 â€“ On-Prem</option>
        <option value="db3">DB3 â€“ AWS</option>
      </select>
      <p class="muted" style="margin-top:8px">
        Die GUI sendet nur HTTP Requests an API-Endpoints (kein JDBC im Frontend).
      </p>
    </section>

    <!-- UPLOAD -->
    <section class="card">
      <h2>2) Upload â†’ ausgewÃ¤hlte DB</h2>
      <label for="fileInput">Datei auswÃ¤hlen</label>
      <input id="fileInput" type="file" />
      <div class="actions" style="margin-top:10px">
        <button id="btnUpload">Upload starten</button>
      </div>
      <div class="progress" title="Upload Progress">
        <div id="uploadBar" class="bar"></div>
      </div>
      <div id="uploadInfo" class="muted">0%</div>
    </section>

    <!-- DOWNLOAD -->
    <section class="card">
      <h2>3) Download â† ausgewÃ¤hlte DB</h2>
      <div class="actions">
        <button id="btnDownload">Download starten</button>
      </div>
      <div class="progress" title="Download Progress">
        <div id="downloadBar" class="bar"></div>
      </div>
      <div id="downloadInfo" class="muted">0%</div>
    </section>

    <!-- RELOCATE & SYNC -->
    <section class="card">
      <h2>4) Relocate & Sync</h2>
      <div class="row">
        <div>
          <label>Von</label>
          <select id="relFrom">
            <option value="dbLocal">dbLocal</option>
            <option value="db1">db1</option>
            <option value="db2">db2</option>
            <option value="db3">db3</option>
          </select>
        </div>
        <div>
          <label>Nach</label>
          <select id="relTo">
            <option value="dbLocal">dbLocal</option>
            <option value="db1">db1</option>
            <option value="db2">db2</option>
            <option value="db3">db3</option>
          </select>
        </div>
      </div>
      <div class="actions" style="margin-top:10px">
        <button id="btnRelocate" class="warn">Relocate</button>
        <button id="btnSync" class="accent">Sync akt. DB</button>
      </div>
      <div id="opsInfo" class="muted" style="margin-top:6px"></div>
    </section>

    <!-- DATA VIEW -->
    <section class="card" style="grid-column: 1 / -1;">
      <h2>5) Ãœbersicht / Auswertung</h2>
      <div class="grid-3">
        <div>
          <label for="filterText">Filter (optional)</label>
          <input id="filterText" type="text" placeholder="z.B. status=free"/>
        </div>
        <div>
          <label>&nbsp;</label>
          <button id="btnLoadData">Daten laden</button>
        </div>
        <div>
          <label>&nbsp;</label>
          <button id="btnExport" class="warn">Als CSV exportieren</button>
        </div>
      </div>
      <div id="stats" class="muted" style="margin-top:8px"></div>
      <div id="tableWrap" style="overflow:auto; max-height: 50vh; border:1px solid #1f2937; border-radius:10px; margin-top:8px;">
        <table id="dataTable" class="table"></table>
      </div>
    </section>

    <!-- SCHEMA VIEW -->
    <section class="card" style="grid-column: 1 / -1;">
      <h2>6) Schema anzeigen</h2>
      <div class="actions">
        <button id="btnLoadSchema">Schema laden</button>
      </div>
      <pre id="schemaOutput" class="code-block">Noch nicht geladen.</pre>
    </section>
  </div>

  <footer>
  </footer>

  <script src="app.js"></script>
</body>
</html>

